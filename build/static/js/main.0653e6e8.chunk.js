(this["webpackJsonpgnuplot-live"]=this["webpackJsonpgnuplot-live"]||[]).push([[0],{29:function(e,t,n){e.exports=n(51)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},46:function(e,t,n){},48:function(e,t){var n,a,o,l,i,r,c;try{n=window.require("electron"),c=window.require("electron-is-dev"),a=n.remote.dialog,o=window.require("fs"),l=window.require("child_process"),i=window.require("path"),r=window.require("electron-store")}catch(u){}var s=new r;e.exports={handleOpenBtn:function(t){a.showOpenDialog({properties:["openFile"],filters:[{name:"gnuplot file",extensions:["plt"]}]}).then((function(n){if(!n.canceled){var a=n.filePaths[0];o.readFile(a,"utf-8",(function(n,o){n&&console.log(n),t.setState({file:a}),e.exports.handleContentChange(o,t)}))}})).catch((function(e){console.log(e)}))},handleCloseBtn:function(e){e.setState({filecontent:"",file:null,viewimage:"",clioutput:"file closed"})},onSaveShortCut:function(t){t.state.file&&e.exports.handleSaveBtn(t)},handleSaveBtn:function(e){o.writeFile(e.state.file,e.state.filecontent,"utf-8",(function(e){e&&console.log(e)}))},handleContentChange:function(t,n){if(n.setState({filecontent:t}),n.state.editorIsLive){n.state.watches.map((function(e){return o.unwatchFile(e),e}));for(var a=i.resolve("./gnuplotview.png"),l=t.split("\n"),r=[],c=l.length-1;c>=0;c--){var s,u;if(n.state.file&&l[c].search("#@watch")>-1)if("continue"===function(){if(s=l[c].trim(),null==(u=s.match(/#@watch +['"](.+)['"]/)))return"continue";s=u[1];var t=i.join(i.dirname(n.state.file),s);o.stat(t,(function(a){a?console.log(a):(o.watchFile(t,(function(t,a){e.exports.handleContentChange(n.state.filecontent,n)})),r.push(t))}))}())continue;var p=l[c].split("#")[0];if(p.search(/(?<!un)(set) +(out)/)>-1){var m=p.match(/(?<!un)(set) +(out[\S]*) +['"](.+)['"]/);m&&(a=i.resolve(i.dirname(n.state.file),m[3]))}}n.setState({watches:r}),null==n.state.file&&(l[0]="set term png; set output 'gnuplotview.png';"+l[0]);var h=l.join("\n");o.writeFile("gnuplotbuffer.temp",h,"utf-8",(function(t){t&&console.log(t),e.exports.runBufferCode(n,a)}))}},convertviewfile:function(t,n,a){var o=i.resolve("./",c?"":"resources","extraResources","image_magick/magick.exe")+" convert "+t+" "+i.resolve("./")+"/gnuplotview.png";e.exports.runCommand(o,n).then(a).catch((function(e){console.log(e)}))},runCommand:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(a,o){l.exec(e,(function(e,l,i){var r=n;e&&(console.log("error: ".concat(e.message)),r+="\n"+i,o(e)),l&&(console.log("stdout: ".concat(l)),r+="\n"+l),t.setState({clioutput:r}),a(r)}))}))},runBufferCode:function(t,n){var a="";a='cd /d "'+(t.state.file?i.dirname(t.state.file):i.dirname("gnuplotbuffer.temp"))+'" ',a+='&& "'+t.state.gnuplot+'" "'+i.resolve("gnuplotbuffer.temp")+'"',e.exports.runCommand(a,t).then((function(){e.exports.convertviewfile(n,t,(function(){var e=i.resolve("./gnuplotview.png");e=e.split("\\").join("/"),t.setState({viewimage:""}),t.setState({viewimage:e+"?"+Date.now()})}))})).catch((function(e){t.setState({viewimage:""})}))},handleChooseGnuplot:function(e,t){t[0]&&(s.set("gnuplot",t[0].path),e.setState({gnuplot:t[0].path}))},getFromStore:function(e){return s.get(e)}}},51:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(24),i=n.n(l),r=(n(34),n(6)),c=n(7),s=n(9),u=n(8),p=(n(35),n(36),n(25)),m=n.n(p),h=(n(44),n(45),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"onChange",value:function(e){this.props.handleContentChange(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"cos-xs-6"},o.a.createElement("div",{className:"card text-white bg-primary text-left",style:{width:"600px"}},o.a.createElement("div",{className:"card-header"},"editor"),o.a.createElement("div",{className:"card-body p-2"},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{onChange:function(t){e.props.handleLiveToggle(t)},className:"form-check-input",type:"checkbox",checked:this.props.live,id:"editorIsLive"}),o.a.createElement("label",{className:"form-check-label",htmlFor:"editorIsLive"},"Enable live editing (disable when typing output file name)")),o.a.createElement(m.a,{mode:"java",theme:"github",onChange:this.onChange.bind(this),name:"ace-editor-component",editorProps:{$blockScrolling:!0},setOptions:{wrap:!0},value:this.props.filecontent,width:"570px",commands:[{name:"save",bindKey:{win:"Ctrl-s",mac:"Cmd-s"},exec:function(t){e.props.handleSaveShortCut()}}]}))))}}]),n}(o.a.Component)),d=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e;return e=null==this.props.file&&(this.props.filecontent||"").trim().length<1?o.a.createElement("samp",null,"no code to plot"):o.a.createElement("img",{src:this.props.source,style:{maxWidth:"570px"},alt:"Gnuplot error or other problem showing plot.",className:"float-right"}),o.a.createElement("div",{className:"cos-xs-6 mr-auto"},o.a.createElement("div",{className:"card bg-light text-left",style:{width:"600px"}},o.a.createElement("div",{className:"card-header"},"png view"),o.a.createElement("div",{className:"card-body"},e)))}}]),n}(o.a.Component),f=(n(46),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"cos-xs-6"},o.a.createElement("div",{className:"card text-white bg-dark text-left",style:{width:"600px",height:"300px"}},o.a.createElement("div",{className:"card-header"},"cmd output"),o.a.createElement("div",{className:"card-body p-2 overflow-auto"},o.a.createElement("small",null,o.a.createElement("samp",null,this.props.clioutput)))))}}]),n}(o.a.Component)),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"text-left"},o.a.createElement("div",{className:"btn-group",role:"group"},o.a.createElement("button",{className:"btn btn-primary",onClick:this.props.handleOpenBtn,disabled:null!=this.props.file},"Open"),o.a.createElement("button",{className:"btn btn-light",onClick:this.props.handleSaveBtn,disabled:null==this.props.file},"Save"),o.a.createElement("button",{className:"btn btn-dark",onClick:this.props.handleCloseBtn,disabled:null==this.props.file},"Close"),o.a.createElement("button",{className:"btn btn-info",onClick:this.props.handleRunBtn},"Run")),o.a.createElement("samp",{className:"d-inline-flex ml-2"},"current file: ",this.props.file))}}]),n}(o.a.Component),g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"cos-xs-6"},o.a.createElement("div",{className:"card text-white bg-secondary text-left",style:{minWidth:"600px",height:"300px"}},o.a.createElement("div",{className:"card-header"},"config"),o.a.createElement("div",{className:"card-body overflow-auto p-2"},o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"form-control-label col-sm-4",htmlFor:"gnuplot-exec-input"},"gnuplot executable"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{id:"gnuplot-exec-input",type:"text",className:"form-control",value:this.props.gnuplot,disabled:!0}),o.a.createElement("input",{type:"file",accept:".exe",onChange:function(t){e.props.handleChooseGnuplot(t.target.files)}}))))))}}]),n}(o.a.Component),b=(n(47),n(26)),w=n(1),E=n(28),C=n(48),x=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={file:null,filecontent:null,gnuplot:C.getFromStore("gnuplot"),clioutput:"",viewimage:"",watches:[],editorIsLive:!0},a}return Object(c.a)(n,[{key:"testmagick",value:function(){console.log("testmagick"),C.testmagick(this)}},{key:"render",value:function(){var e=this;return o.a.createElement(b.a,null,o.a.createElement(w.c,null,o.a.createElement(w.a,{path:"/"},o.a.createElement(E.a,{keyName:"ctrl+s",onKeyDown:function(){C.onSaveShortCut(e)}},o.a.createElement("div",{className:"App"},o.a.createElement(v,{handleOpenBtn:function(){C.handleOpenBtn(e)},handleSaveBtn:function(){C.handleSaveBtn(e)},handleCloseBtn:function(){C.handleCloseBtn(e)},handleRunBtn:function(){C.runBufferCode(e)},file:this.state.file}),o.a.createElement("div",{className:"container mw-100"},o.a.createElement("div",{className:"row flex-nowrap"},o.a.createElement(h,{filecontent:this.state.filecontent,handleContentChange:function(t){C.handleContentChange(t,e)},handleSaveShortCut:function(){C.onSaveShortCut(e)},live:this.state.editorIsLive,handleLiveToggle:function(t){e.setState({editorIsLive:t.target.checked})}}),o.a.createElement(d,{source:this.state.viewimage,file:this.state.file,filecontent:this.state.filecontent})),o.a.createElement("div",{className:"row flex-nowrap"},o.a.createElement(f,{clioutput:this.state.clioutput}),o.a.createElement(g,{gnuplot:this.state.gnuplot,handleChooseGnuplot:function(t){C.handleChooseGnuplot(e,t)}}))))))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.0653e6e8.chunk.js.map